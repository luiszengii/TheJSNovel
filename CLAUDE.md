# CLAUDE.md

本文件为 Claude Code (claude.ai/code) 在此仓库中工作时提供指导。

## 项目概述

**TheJSNovel** - 一个将前端开发概念转化为结构化技术故事的技术叙事项目。

**目的**: 创建同时具备以下功能的文档:
- 引人入胜的技术叙事
- 准确的技术参考资料
- 面试准备资源

**输出格式**: 每章都是项目根目录中的独立 Markdown 文件。

---

## 文件结构

```
/TheJSNovel/
├── CLAUDE.md                              # 本文件 - 项目总指南
├── TYPOGRAPHY_RULES.md                    # 排版规则 (9条铁律)
├── .claude/                               # Claude Code Skills 系统
│   └── skills/
│       ├── jsnovel-skill/                 # 主控 Skill (协调器)
│       │   ├── CLAUDE.md                  # 主控逻辑: Part识别、Skill推荐、调用
│       │   ├── SKILL.md                   # Skill元信息
│       │   ├── TECHNICAL_ACCURACY.md      # 技术准确性铁律
│       │   ├── TYPOGRAPHY_RULES.md        # 排版规则 (9条)
│       │   └── NARRATIVE_DIVERSITY.md     # 叙事多样性系统
│       └── xianshi-skill/                 # 辅助 Skill: 现代题材创作
│           ├── CLAUDE.md                  # 现代题材 Agent 配置
│           ├── SKILL.md                   # Skill元信息
│           ├── outline-method.md          # 大纲创作方法论 (7部分法)
│           ├── output-style.md            # 写作风格指南 (8条总则)
│           ├── templates/                 # 模板文件 (4个)
│           │   ├── outline-template.md
│           │   ├── character-template.md
│           │   ├── chapter-index-template.md
│           │   └── chapter-template.md
│           └── examples/                  # 示例文件 (3个)
│               ├── outline-example.md     # 《蚝田》大纲
│               ├── character-example.md   # 《蚝田》人物
│               └── chapter-example.md     # 《蚝田》第1章
├── 01-世界诞生-HTML/                      # Part 1: HTML (第 1-15 章)
│   ├── chapter-01-*.md
│   └── ...
├── 02-表象与幻术-CSS/                     # Part 2: CSS (第 16-30 章)
│   ├── chapter-16-*.md
│   └── ...
├── 03-因果律初现-JavaScript基础/          # Part 3: JavaScript 基础 (第 31-46 章)
│   ├── chapter-31-*.md
│   └── ...
├── 04-对象与记忆-Object/                  # Part 4: 对象与数据 (第 47-66 章)
│   ├── chapter-47-*.md
│   └── ...
├── 05-函数深渊-Function/                  # Part 5: 作用域与函数 (第 67-78 章)
│   ├── chapter-67-*.md
│   └── ...
├── 06-血统与继承-Prototype/               # Part 6: 原型与类 (第 79-92 章)
│   ├── chapter-79-*.md
│   └── ...
├── 07-时间与异步-Async/                   # Part 7: 异步世界 (第 93-102 章)
│   ├── chapter-93-*.md
│   └── ...
├── 08-模块与杂项-Module/                  # Part 8: 模块与元编程 (第 103-112 章)
│   ├── chapter-103-*.md
│   └── ...
├── 09-浏览器世界-DOM/                     # Part 9: DOM 与事件 (第 113-140 章)
│   ├── chapter-113-*.md
│   └── ...
└── 10-数据网络与组件-Network/             # Part 10: 数据、网络与组件 (第 141-168 章)
    ├── chapter-141-*.md
    └── ...
```

**章节命名规范**: `chapter-{编号}-{slug}.md`
- 示例: `chapter-01-event-loop.md`, `chapter-23-z-index-stacking.md`

---

## Skills 系统说明

### 主从架构设计

**jsnovel-skill (主控 Skill)**:
- **职责**: 协调器，不直接创作内容
- **功能**:
  1. 识别用户要创作的 Part (Part 1-10)
  2. 提取该 Part 的技术内容范围
  3. 推荐适合的辅助 Skills (现代题材/古代权谋/言情/科幻/探案等)
  4. 调用用户选择的辅助 Skill
  5. 传递技术约束 (技术准确性、排版规则、叙事多样性)

**xianshi-skill (辅助 Skill - 现代题材)**:
- **职责**: 内容创作者
- **风格**: 现实题材短篇小说创作系统
- **核心公式**: `现实题材 = 可验证困境 + 具体压力 + 不可兼得选择 + 有代价结局`
- **工作流程**:
  1. Q1-Q3 需求收集 (故事创意、核心冲突、调性)
  2. 创作故事大纲 (起承转合结构)
  3. 创作人物小传 (5-8个角色)
  4. 创作章节目录
  5. 逐章创作正文 (2000-3500字/章)
- **适用场景**: 办公室、生产环境事故、Code Review、技术讨论等现代职场场景

**未来辅助 Skills (待迁移)**:
- **court-intrigue-skill**: 古代权谋题材 (DOM王国朝堂、标签贵族权力斗争)
- **romance-skill**: 言情小说题材 (元素关系、对象爱恨、异步等待)
- **sci-fi-skill**: 科幻探险题材 (虚拟世界、数据流、网络星系)
- **detective-skill**: 探案推理题材 (Bug侦破、堆栈追踪、内存泄漏调查)

### 使用 Skills 创作文章

#### 完整工作流

1. **开启对话**: 告诉主控 Skill 你想创作哪个 Part
   ```
   "我想创作 Part 1 的小说"
   或
   "我想创作第 23 章"
   ```

2. **主控识别**: jsnovel-skill 自动识别
   - Part 1 = 第 1-15 章 (HTML - 世界诞生)
   - 技术范围: HTML 相关知识点
   - 推荐适合的辅助 Skills

3. **Skill 推荐**: 主控展示可用风格
   ```
   Part 1 (HTML - 世界诞生) 可用的创作风格:

   1. **xianshi-skill** - 现代题材
      场景示例: 办公室程序员调试 HTML 解析 bug、生产环境跨浏览器兼容性事故

   2. **court-intrigue-skill** - 古代权谋 (待迁移)
      场景示例: DOM 王国朝堂、标签贵族的权力斗争

   3. **romance-skill** - 言情小说 (待迁移)
      场景示例: 元素之间的爱恨情仇

   4. 其他题材 (请描述您的想法)

   请选择一个创作风格 (输入数字):
   ```

4. **用户选择**: 选择风格
   ```
   "1" (选择 xianshi-skill)
   ```

5. **调用辅助 Skill**: 主控调用 xianshi-skill
   - 传递 Part 1 的技术内容
   - 传递三大铁律约束:
     - 技术准确性铁律
     - 排版规则 9 条
     - 叙事多样性要求

6. **xianshi-skill 执行**:
   - **Q1**: 故事的核心创意和吸引力
   - **Q2**: 核心冲突
   - **Q3**: 故事调性 (市井烟火/社会派/职场励志/婚恋伦理)
   - 创作大纲 → 人物小传 → 章节目录 → 逐章正文

7. **完成创作**: 输出到对应 Part 目录
   - 文件保存到 `01-世界诞生-HTML/` 目录
   - 遵守技术准确性、排版规则、叙事多样性

#### 指令集

**jsnovel-skill 主控指令**:
- `/help` - 显示所有可用指令和使用说明
- `/part [编号]` - 开始创作指定 Part (如 `/part 1`)
- `/chapter [编号]` - 开始创作指定章节 (如 `/chapter 25`)
- `/skills` - 查看所有可用的辅助 Skills 及其特点
- `/status` - 查看整个项目的创作进度

**xianshi-skill 辅助指令** (主控调用后):
- `/character` - 创作人物小传
- `/catalog` - 创作章节目录
- `/write [N]` - 创作第 N 章
- `/status` - 查看创作进度

#### 三大铁律

**1. 技术准确性铁律**:
- 所有代码必须可运行
- 所有输出必须与描述一致
- 必须符合真实的 ECMAScript/HTML/CSS/浏览器行为
- **绝不为故事性牺牲技术准确性**

**2. 排版规则 (9条铁律)** - 详见 [TYPOGRAPHY_RULES.md](./TYPOGRAPHY_RULES.md):
- 中英文/数字间距
- 标点符号后空格
- 标点符号选择 (中文环境用中文标点)
- 引号使用 (对话用 ""，代码用 ` `)
- 数字与单位空格
- 专有名词大小写
- 破折号使用
- 代码块前后空行
- 省略号使用

**3. 叙事多样性要求**:
- 15 种叙事方式 × 6 种文章形式 × 15 种背景世界观
- 每个 Part 都是全新的阅读体验
- 避免叙事重复感

---

## 内容创作指南

### 核心目标

创建同时满足以下标准的技术内容:
- 可作为技术故事阅读 - 引人入胜，有代入感
- 可作为技术参考文档使用 - 准确、完整、可验证
- 可在面试中作为因果链重述 - 清晰的问题-原因-解决链条

---

### 章节写作目标

每章必须让读者至少产生以下一种感受:
- "原来浏览器是这样思考的"
- "难怪这个 bug 这么诡异"
- "我终于能解释这个面试题了"

---

### 长度和密度要求

- **目标字数**: 2,000–3,500 字 (为故事沉浸感增加)
- **内容平衡**: 75% 故事/叙事，25% 技术解释

### 排版规则 (关键)

**铁律：排版可读性规则必须严格遵守**

所有创作内容（章节正文、标题、对话、代码注释、知识总结等）都必须严格遵守 9 条排版规则，以确保阅读体验的专业性和一致性。

**详细规则请查看**：[TYPOGRAPHY_RULES.md](./TYPOGRAPHY_RULES.md)

**核心要点**:
1. 中英文/数字间距 - 必须添加空格
2. 标点符号后空格 - 逗号、句号、冒号等后必须空格
3. 标点符号选择 - 中文环境用中文标点，代码用英文标点
4. 引号使用 - 对话用 `""`，代码用 `` ` ` ``
5. 数字与单位 - 中文单位加空格，英文单位不加空格
6. 专有名词大小写 - JavaScript、GitHub、WeakMap 等必须正确
7. 破折号使用 - 停顿用 `——`，范围用 `-`
8. 代码块前后空行 - 必须有空行分隔
9. 省略号使用 - 统一使用 `...` 或 `…`

**适用范围**: 所有章节内容（正文、标题、对话、注释、总结、表格）
**例外情况**: 纯代码逻辑、特定术语、URL 路径

---

### 技术准确性要求

- 必须符合真实的 ECMAScript/HTML/CSS/浏览器行为
- 不允许模糊描述
- **绝不为故事性牺牲技术准确性**

如果故事与真实规则冲突，故事必须让步。

---

### 叙事多样性系统 (多维度)

**核心理念**: 168章不应该有重复感，每个 Part 都是一个全新的阅读体验。

---

#### 一、叙事维度库

##### A. 叙事方式（15种）

1. **悬疑侦探型** - 奇怪bug → 收集线索 → 推理 → 真相揭晓
2. **灾难升级型** - 小问题 → 越修越糟 → 连锁反应 → 危机顶点 → 理解根因
3. **对抗冲突型** - 期望 vs 世界规则 → 多次失败 → 妥协理解 → 与规则共存
4. **考古发现型** - 遗留代码 → 逐层挖掘历史 → 理解设计演化 → 现代重构
5. **实验探索型** - 好奇心驱动 → 动手实验 → 意外发现 → 深入验证 → 理论总结
6. **时间循环型** - 问题反复出现 → 每次尝试不同方案 → 逐步接近真相 → 打破循环
7. **平行世界型** - 同一问题在不同环境表现不同 → 对比差异 → 找到关键变量
8. **成长蜕变型** - 新手 → 遇到挑战 → 导师指引 → 突破瓶颈 → 成为专家
9. **预言实现型** - 前辈警告"别这样做" → 不信 → 踩坑 → 验证预言 → 理解智慧
10. **连锁反应型** - 一个小改动 → 触发连锁效应 → 影响意想不到的地方 → 追溯依赖链
11. **黑箱逆向型** - 只有输入输出 → 通过实验推测内部机制 → 构建心智模型
12. **双线叙事型** - 现在的问题 ↔ 过去的设计决策 → 理解历史背景 → 认同当前方案
13. **群体智慧型** - 团队讨论 → 不同观点碰撞 → 实验验证 → 达成共识
14. **危机倒计时型** - 紧迫deadline → 压力下快速定位 → 临时修复 → 事后深度理解
15. **顿悟时刻型** - 长期困惑 → 看似无关的触发 → 突然顿悟 → 一切豁然开朗

##### B. 文章形式（6种）

1. **标准叙事** - 第二人称"你"的沉浸式故事，场景描写 + 代码示例 + 知识总结
2. **对话体** - 师徒对话、技术讨论、面试问答形式
   ```
   你: "为什么闭包会导致内存泄漏?"
   老张: "问得好。你先看看这段代码..."
   ```
3. **技术日志** - 第一人称日记风格
   ```
   2024年3月15日 22:00
   今天遇到了一个诡异的bug...
   ```
4. **聊天记录** - Slack/钉钉聊天风格
   ```
   [产品经理 09:15] 购物车有个紧急bug!
   [你 09:16] 什么情况?
   ```
5. **寓言故事** - 拟人化技术概念
   ```
   从前有个王国叫DOM世界，有三位统治者...
   ```
6. **新闻报道** - 模拟新闻报道风格
   ```
   ## 【突发】DOM世界第47次对象引用事故
   本报讯（记者 首席编年史官）...
   ```

##### C. 背景故事世界观（15种）

1. **现代科技 - 办公室程序员** - 真实职场场景、deadline压力、团队协作
2. **现代科技 - 创业公司** - 快节奏、资源有限、快速迭代
3. **现代科技 - 开源社区** - GitHub贡献者、PR讨论、Issue追踪
4. **奇幻魔法 - 魔法学院** - JavaScript = 魔法体系，API = 咒语，Bug = 魔法失控
5. **奇幻魔法 - 魔法工坊** - 炼金术士、魔法道具制作、配方研究
6. **赛博朋克 - 虚拟世界** - Matrix风格、数据流、网络节点
7. **赛博朋克 - 黑客帝国** - 系统漏洞、安全攻防、底层协议
8. **侦探推理 - 技术侦探社** - Bug = 案件，Stack Trace = 线索，调试 = 破案
9. **武侠江湖 - 编程门派** - 函数派、对象派、原型派，招式 = 设计模式
10. **宫廷权谋 - 浏览器朝堂** - Chrome大臣、Firefox将军，标准 = 律法
11. **科幻太空 - 星际殖民** - 模块 = 星球，依赖 = 航线，打包 = 星际贸易
12. **恐怖灵异 - 代码幽灵** - 内存泄漏 = 幽灵，闭包 = 封印，GC = 驱魔
13. **校园青春 - 编程社团** - 学习小组、技术分享会、考试冲刺
14. **末日废土 - 技术幸存者** - 遗留系统 = 废墟，维护 = 拾荒，重构 = 重建
15. **生物进化 - 代码生态系统** - 函数 = 生物，继承 = 进化，淘汰 = 优胜劣汰

---

#### 二、Part级长线故事设计

**Part 1: 世界诞生 (HTML, 15章)** - 创世纪史诗
- 长线故事：考古发现 + 世界构建
- 背景世界观：寓言故事 - DOM王国的诞生
- 文章形式分布：标准10章 / 寓言3章 / 对话2章
- 核心主题：存在先于表象

**Part 2: 表象与幻术 (CSS, 15章)** - 视觉魔法学院
- 长线故事：成长蜕变 + 魔法修炼
- 背景世界观：奇幻魔法 - CSS魔法学院
- 文章形式分布：标准9章 / 对话4章 / 日志2章
- 核心主题：表象独立于存在

**Part 3: 因果律初现 (JS基础, 16章)** - 时间魔法启蒙
- 长线故事：校园成长 + 基础训练
- 背景世界观：校园青春 - JavaScript入门课
- 文章形式分布：标准10章 / 对话4章 / 日志2章
- 核心主题：因果决定变化

**Part 4: 对象与记忆 (Object, 20章)** - 记忆宫殿探险
- 长线故事：考古发现 + 黑箱逆向
- 背景世界观：侦探推理 - 内存侦探社
- 文章形式分布：标准14章 / 对话3章 / 聊天记录2章 / 新闻1章
- 核心主题：引用创造关联

**Part 5: 函数深渊 (Function, 12章)** - 递归迷宫冒险
- 长线故事：地底探险 + 层层深入
- 背景世界观：奇幻探险 - 函数深渊地下城
- 文章形式分布：标准8章 / 对话3章 / 日志1章
- 核心主题：函数是一等公民

**Part 6: 血统与继承 (Prototype, 14章)** - 王朝家谱史
- 长线故事：双线叙事 + 家族传承
- 背景世界观：宫廷权谋 - JavaScript王朝继承体系
- 文章形式分布：标准9章 / 对话3章 / 新闻2章
- 核心主题：血统通过原型传递

**Part 7: 时间与异步 (Async, 10章)** - 时间旅行纪事
- 长线故事：时间循环 + 预言实现
- 背景世界观：科幻太空 - 时间流操控者
- 文章形式分布：标准7章 / 日志2章 / 对话1章
- 核心主题：未来的操作需要契约

**Part 8: 模块与杂项 (Module, 10章)** - 边境探索志
- 长线故事：开拓探险 + 工具收集
- 背景世界观：科幻太空 - 星际模块系统
- 文章形式分布：标准7章 / 对话2章 / 新闻1章
- 核心主题：隔离创造秩序

**Part 9: 浏览器世界 (DOM/Event, 28章)** - 王国全景图
- 长线故事：王国探险 + 系统理解
- 背景世界观：奇幻王国 - 浏览器DOM王国
- 文章形式分布：标准20章 / 对话5章 / 聊天记录2章 / 新闻1章
- 核心主题：浏览器是宿主环境

**Part 10: 数据网络与组件 (Network, 28章)** - 联网时代
- 长线故事：连接世界 + 技术演化
- 背景世界观：赛博朋克 - 数据网络世界
- 文章形式分布：标准19章 / 对话5章 / 聊天记录3章 / 日志1章
- 核心主题：网络连接万物

---

#### 三、Chapter级连贯机制

**1. 前后呼应系统**
- **技术关联**: 后续章节引用前面章节的知识点
  - Chapter 50引用Chapter 47的对象引用概念
  - Chapter 69闭包引用Chapter 36作用域知识
- **角色延续**: 同一Part内保持角色一致性
  - Part 4: "你"始终是技术侦探
  - Part 6: "老张"作为导师反复出现
- **问题演化**: 后章节解决前章节遗留的问题
  - Chapter 93回调地狱 → Chapter 94 Promise解决

**2. 独立完整性保障**
- 每章必须有完整的"问题-探索-解决-总结"结构
- 不依赖其他章节也能理解核心知识点
- 但如果读过相关章节，会有更深理解

---

#### 四、技术准确性保障

**双层验证机制**:
- **叙事层**: 可以使用比喻、拟人、世界观设定，可以虚构角色、场景、时间线
- **技术层**: 所有代码必须可运行，所有输出必须与实际一致，所有规则必须符合规范
- **铁律**: 绝不为故事改变技术事实

**三级校验流程**:
- **Level 1**: 创作时在浏览器中验证所有代码
- **Level 2**: 技术审校者检查代码准确性
- **Level 3**: 读者测试并收集反馈

**平衡原则**:
- ✅ 故事服务于技术，而非相反
- ✅ 比喻辅助理解，但不能误导
- ✅ 知识总结部分必须严谨
- ❌ "Promise让代码停下来等待" (错误！Promise不会阻塞)

---

#### 五、多样性检查清单

在创作新章节前，检查：

- [ ] 叙事方式是否在Part内重复超过3次？
- [ ] 文章形式是否与前3章重复？
- [ ] 时间设定是否重复（如连续"周X上午九点"）？
- [ ] 叙事节奏是否连续紧张或连续轻松？
- [ ] 视角是否需要变化（纯第二人称vs加入对话）？
- [ ] 背景世界观是否符合Part设定？

**选择最适合所教技术概念的叙事方式、文章形式和背景故事。**

---

### 明确禁止
- ❌ 在一章中解释多个不相关的技术概念
- ❌ 跳过叙事直接跳到代码示例
- ❌ 使用 "读者应该知道" 或 "众所周知" 作为前提
- ❌ 写项目符号式叙事 (叙事部分应该是散文形式)
- ❌ 在建立概念重要性之前就从技术定义开始
- ❌ 在故事部分使用枯燥的学术语气

**现在鼓励的内容 (相比之前的约束有所改变)**:
- ✅ 以 "你" 体验问题的形式进行 "角色冒险"
- ✅ 世界构建和隐喻 (只要技术上准确)
- ✅ 情感化和戏剧化的故事讲述
- ✅ 内心对话和思考过程

---

## 章节生成流程

创建新章节时:

1. 选择一个具体的前端技术概念 (事件循环、闭包、原型链、CSS 特异性等)
2. 识别一个导致 bug 的真实场景
3. 严格遵循 5 部分结构
4. 确保技术准确性
5. 通过升级风险创造张力
6. 根据章节编号确定属于哪一编
7. 保存到相应目录:
   - 第 1-15 章 → `01-世界诞生-HTML/`
   - 第 16-30 章 → `02-表象与幻术-CSS/`
   - 第 31-46 章 → `03-因果律初现-JavaScript基础/`
   - 第 47-66 章 → `04-对象与记忆-Object/`
   - 第 67-78 章 → `05-函数深渊-Function/`
   - 第 79-92 章 → `06-血统与继承-Prototype/`
   - 第 93-102 章 → `07-时间与异步-Async/`
   - 第 103-112 章 → `08-模块与杂项-Module/`
   - 第 113-140 章 → `09-浏览器世界-DOM/`
   - 第 141-168 章 → `10-数据网络与组件-Network/`
8. 文件命名: `chapter-{编号}-{slug}.md` (例如, `chapter-01-event-loop.md`)

---

## 技术领域覆盖

潜在主题 (非详尽):

**JavaScript 核心**:
- 事件循环与异步优先级
- 闭包与内存泄漏
- `this` 绑定
- 原型链
- 提升
- 作用域链

**浏览器 API**:
- 事件冒泡/捕获
- DOM 操作时机
- requestAnimationFrame
- Intersection Observer

**CSS 机制**:
- 特异性战争
- 浮动塌陷
- BFC (块格式化上下文)
- 堆叠上下文
- 级联顺序

**现代前端**:
- React 协调
- 虚拟 DOM 差异
- 状态管理陷阱
- hooks 依赖数组

---

## 完整章节大纲

### 第一编 · 世界诞生（HTML：存在法则）

1. 世界为何是树：DOM 的诞生
2. Doctype 裁决：怪异模式与标准世界
3. Head 与 Body 的分权协议
4. 标签与元素：存在的两种形态
5. 非法嵌套事故：畸形节点的存活
6. 语义标签：世界意义的标注系统
7. 块级与行内：空间占据规则
8. 属性系统：附着在存在之上的信息
9. data-* 标记：隐藏信息的合法通道
10. 表单结构：人类与世界的输入接口
11. Label 绑定事故：失联的输入控件
12. iframe：平行世界的打开方式
13. script 的放置顺序与命运偏移
14. defer 与 async：延迟存在的时间差
15. 可访问性缺失事故：存在但无法抵达

### 第二编 · 表象与幻术（CSS：表象法则）

16. 样式降临：CSS 如何附着世界
17. 选择器定位：规则的命中范围
18. 权重裁决：样式冲突的法庭
19. 继承链：表象的血缘传播
20. 盒模型真相：元素的真实体积
21. display 变更事故：存在状态切换
22. position 系统：参考系的建立
23. z-index 迷局：堆叠上下文战争
24. Flex 法则：一维秩序的重构
25. Grid 法则：二维空间的统治
26. 媒体查询：世界的自适应形态
27. overflow 裁剪事故：被隐藏的存在
28. transform 扭曲：空间被重新定义
29. animation 与 transition：时间的表象
30. 样式重排事故：性能的代价

### 第三编 · 因果律初现（JavaScript 基础）

31. Hello World：因果律首次启动
32. 执行顺序：代码如何进入现实
33. 严格模式：旧世界规则的废除
34. 变量声明事故：名字先于存在
35. 数据类型分裂：值的真实身份
36. alert / prompt：阻塞式交流
37. 隐式转换事故：值被强行变形
38. 运算符陷阱：比较为何失败
39. 条件分支：命运的选择点
40. 逻辑运算符：短路的真实含义
41. 空值合并裁决：?? 的介入时机
42. 循环推进：时间如何重复
43. switch 判决厅：多分支裁定
44. 函数封装：因果的打包
45. 函数表达式：延迟定义的因果
46. 箭头函数初现：this 的缺席

### 第四编 · 对象与记忆（Object & Data）

47. 一切皆对象：世界的基本单位
48. 引用复制事故：共享的后果
49. 垃圾回收：幽灵对象的形成
50. this 指向谜案：调用即裁决
51. new 的瞬间：构造流程全纪录
52. 可选链 ?.：安全访问协议
53. Symbol：不可见的身份标记
54. 对象转原始值：隐式协商
55. 原始类型的方法幻象
56. 数字精度事故：0.1 + 0.2
57. 字符串内幕：Unicode 的影响
58. 数组秩序：索引与长度
59. 数组方法副作用事故
60. Iterable 协议：可遍历的资格
61. Map 与 Set：键的自由
62. WeakMap 与 WeakSet：弱引用世界
63. Object.keys 系列：枚举的边界
64. 解构赋值：结构化拆解
65. Date 对象：时间的表示
66. JSON 序列化事故：信息丢失

### 第五编 · 函数深渊（Scope & Function）

67. 递归调用：堆栈的极限
68. Rest 与 Spread：参数的展开
69. 作用域与闭包：记忆的形成
70. var 遗留事故：函数级幽灵
71. 全局对象污染事件
72. 函数对象与 NFE 身份
73. new Function：动态代码的代价
74. 定时器调度：时间延迟的真相
75. 装饰器模式：因果的包裹
76. call 与 apply：临时夺舍
77. bind：永久绑定仪式
78. 箭头函数深度裁定

### 第六编 · 血统与继承（Prototype & Class）

79. 属性标志：可写、可枚举、可配置
80. getter / setter：访问的拦截
81. 原型的诞生：继承的起点
82. 原型链查找：血统追溯
83. F.prototype 的特殊地位
84. 原生原型：内建血统
85. 无 proto 的孤立对象
86. class 语法：继承的表象
87. class 继承事故：super 的时机
88. 静态成员：类自身的属性
89. 私有字段：封闭的秘密
90. 扩展内建类的风险
91. instanceof 判定规则
92. Mixin：能力的拼接

### 第七编 · 时间与异步（Async World）

93. 回调时代：嵌套的起源
94. Promise 契约：未来的约定
95. Promise 链：顺序的延续
96. Promise 错误传播事故
97. Promise API：批量契约
98. Promisification：旧因果改造
99. 微任务插队事件
100. async / await：时间让渡
101. Generator：可暂停的执行
102. 异步迭代：时间流遍历

### 第八编 · 模块与杂项（Module & Meta）

103. 模块系统：作用域隔离
104. import / export：依赖通道
105. 动态导入：运行时加载
106. Proxy：拦截世界
107. Reflect：标准反射
108. eval 事故：字符串执行
109. 柯里化：参数分阶段绑定
110. Reference Type：this 的根源
111. BigInt：超出安全范围的数字
112. Unicode 内幕：字符的真实长度

### 第九编 · 浏览器世界（DOM & Event）

113. 浏览器环境：宿主的规则
114. DOM 树构建：节点生成流程
115. DOM 遍历：节点的行走路径
116. 元素查询：搜索的代价
117. 节点属性系统
118. Attribute 与 Property 分裂
119. 文档修改：即时生效的代价
120. class 与 style 操作
121. 元素尺寸计算
122. Window 与滚动坐标
123. 事件系统总览
124. 冒泡与捕获路径
125. 事件委托：集中处理
126. 默认行为的阻止
127. 自定义事件的创建
128. UI / 鼠标 / 指针事件
129. 键盘事件模型
130. 表单事件与焦点
131. 表单提交流程
132. 页面生命周期
133. script async / defer 执行差异
134. 资源加载与错误
135. MutationObserver：结构监听
136. Selection 与 Range
137. 事件循环全景复盘
138. Frame 与 window 关系
139. 跨窗口通信
140. 点击劫持事故

### 第十编 · 数据、网络与组件

141. ArrayBuffer：二进制世界
142. TextDecoder / Encoder
143. Blob：不可变数据块
144. File 与 FileReader
145. Fetch 请求模型
146. FormData：表单封装
147. Fetch 进度追踪
148. Abort 中止协议
149. 跨源请求裁决
150. URL 对象解析
151. XMLHttpRequest 遗留体系
152. 可恢复文件上传
153. 长轮询机制
154. WebSocket：持久连接
155. Server-Sent Events
156. Cookie：早期存储
157. localStorage / sessionStorage
158. IndexedDB：结构化存储
159. 贝塞尔曲线与缓动
160. CSS 动画系统
161. JavaScript 动画控制
162. Web Components 概览
163. Custom Elements 定义
164. Shadow DOM：封闭子树
165. template 元素
166. slot 机制
167. Shadow DOM 样式隔离
168. Shadow DOM 与事件传播

---

## 质量标准

每章必须达到:
- **故事参与度**: 读者应该感到沉浸在 "你" 的体验中
- **技术准确性**: 可通过 MDN、ECMAScript 规范或浏览器 DevTools 验证
- **记忆保持**: 故事元素帮助读者记住技术概念
- **情感旅程**: 困惑 → 调查 → 揭示 → 理解
- **可运行代码**: 所有代码示例必须是真实且可执行的
- **面试可复述**: 可以在面试中通过故事解释概念
- **叙事流畅**: 散文叙事，而非项目符号文档 (知识部分除外)
- **灵活结构**: 段落标题匹配叙事类型，不强制套用固定模板

**平衡检查**: 每章应该约 75% 叙事/故事，25% 技术解释。

**结构灵活性**: 根据需要使用 3-5 个段落，标题应反映具体的叙事类型 (生产事故、周末项目、技术分享、代码审查、性能优化或架构设计)。

---