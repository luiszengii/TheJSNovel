# 技术准确性铁律

技术准确性是 TheJSNovel 创作的最高准则，所有技术内容必须符合真实的浏览器行为和语言规范。

---

## 核心原则

### 准则 1: 符合真实规范

所有技术内容必须符合：
- ECMAScript 规范
- HTML Living Standard
- CSS 规范
- 浏览器实际行为

### 准则 2: 不允许模糊描述

- ❌ "大概是这样..."
- ❌ "通常情况下..."
- ❌ "可能会..."
- ✅ 明确的技术事实
- ✅ 可验证的行为描述
- ✅ 准确的规范引用

### 准则 3: 绝不为故事性牺牲技术准确性

**铁律**: 如果故事与真实规则冲突，故事必须让步。

**允许**:
- ✅ 用比喻和拟人帮助理解技术概念
- ✅ 虚构场景、角色、时间线
- ✅ 使用世界观设定增强故事性

**禁止**:
- ❌ 为了情节需要改变技术事实
- ❌ 为了增强戏剧性而夸大技术影响
- ❌ 用错误的技术解释来支撑故事逻辑

---

## 双层验证机制

### 叙事层 (可虚构)

可以自由创作的内容：
- 场景设定 (办公室、咖啡厅、魔法学院等)
- 角色虚构 (你、老张、产品经理等)
- 时间线 (周五下午、深夜、deadline前等)
- 情感表达 (困惑、挫折、顿悟等)
- 世界观设定 (DOM王国、魔法体系等)

### 技术层 (必须真实)

必须严格准确的内容：
- **代码示例**: 所有代码必须可运行
- **输出结果**: 所有输出必须与实际一致
- **技术规则**: 所有规则必须符合规范
- **浏览器行为**: 所有行为描述必须可验证
- **API 用法**: 所有 API 调用必须正确

---

## 三级校验流程

### Level 1: 创作时验证

**要求**: 在浏览器中验证所有代码

**验证步骤**:
1. 在 Chrome DevTools 中运行所有代码示例
2. 验证输出结果与描述一致
3. 测试关键边界情况
4. 检查是否有浏览器兼容性问题

**工具**:
- Chrome DevTools Console
- Firefox Developer Tools
- Safari Web Inspector
- 在线代码编辑器 (如 CodePen, JSFiddle)

### Level 2: 技术审校

**审校重点**:
- 代码准确性复查
- 规范引用验证
- 浏览器行为确认
- 术语使用检查

### Level 3: 读者反馈

**收集反馈**:
- 读者测试代码示例
- 报告不一致之处
- 提供改进建议
- 验证知识正确性

---

## 平衡原则

### ✅ 正确做法

1. **故事服务于技术，而非相反**
   - 技术事实优先
   - 故事增强理解
   - 比喻辅助记忆

2. **比喻辅助理解，但不能误导**
   - 使用恰当的类比
   - 明确类比的边界
   - 避免过度简化

3. **知识总结部分必须严谨**
   - 使用准确的技术术语
   - 提供可验证的事实
   - 引用权威文档

### ❌ 错误做法

**示例 1: 错误的技术描述**
```markdown
❌ "Promise 让代码停下来等待"
✅ "Promise 允许我们以链式调用的方式处理异步操作的结果"

❌ "闭包会自动清理内存"
✅ "闭包会保持对外部作用域的引用，需要手动解除引用才能被垃圾回收"

❌ "async/await 是多线程"
✅ "async/await 是基于 Promise 的语法糖，依然运行在单线程事件循环中"
```

**示例 2: 夸大的技术影响**
```markdown
❌ "这个 bug 会导致整个网站崩溃"（如果实际只是 UI 错误）
✅ "这个 bug 会导致购物车显示异常，但不影响后端数据"

❌ "这个优化让性能提升了 100 倍"（如果实际只是 10% 提升）
✅ "这个优化让首屏加载时间从 3s 降低到 2.7s，提升了 10%"
```

**示例 3: 错误的因果关系**
```markdown
❌ "因为使用了 var，所以变量提升了"
✅ "var 声明的变量会发生提升，这是 JavaScript 的执行机制"

❌ "箭头函数没有 this，所以性能更好"
✅ "箭头函数不绑定 this，它的 this 继承自外层作用域"
```

---

## 技术准确性检查清单

在创作每章前，必须确认：

### 代码验证
- [ ] 所有代码在浏览器中测试通过
- [ ] 输出结果与描述一致
- [ ] 没有语法错误
- [ ] 涉及的 API 在目标浏览器中存在

### 概念准确性
- [ ] 技术术语使用正确
- [ ] 概念解释符合规范
- [ ] 浏览器行为描述准确
- [ ] 没有误导性的简化

### 引用验证
- [ ] 规范条款引用准确
- [ ] MDN 文档链接有效
- [ ] 版本兼容性说明清晰
- [ ] 浏览器差异已标注

### 避免的错误
- [ ] 没有为故事改变技术事实
- [ ] 没有编造不存在的 API
- [ ] 没有模糊关键技术细节
- [ ] 没有忽略重要的浏览器差异

---

## 常见技术准确性错误类型

### 类型 1: 混淆概念

**错误**: 混淆 undefined 和 null
```markdown
❌ "undefined 就是 null"
✅ "undefined 表示变量未定义，null 表示有意的空值"
```

### 类型 2: 过度简化

**错误**: 过度简化事件循环
```markdown
❌ "事件循环就是不停地执行回调"
✅ "事件循环分为宏任务队列和微任务队列，按照特定顺序执行"
```

### 类型 3: 时效性错误

**错误**: 使用过时的 API
```markdown
❌ "使用 document.write 添加内容"
✅ "现代开发中应避免 document.write，推荐使用 DOM API"
```

### 类型 4: 浏览器差异

**错误**: 忽略浏览器差异
```markdown
❌ "所有浏览器都支持这个 API"
✅ "Chrome 90+ 支持，Safari 需要 polyfill"
```

---

## 技术审校参考资源

### 官方规范
- **ECMAScript**: https://tc39.es/ecma262/
- **HTML Living Standard**: https://html.spec.whatwg.org/
- **CSS**: https://www.w3.org/Style/CSS/specs.en.html
- **Web APIs**: https://developer.mozilla.org/en-US/docs/Web/API

### 参考文档
- **MDN Web Docs**: https://developer.mozilla.org/
- **Can I Use**: https://caniuse.com/
- **JavaScript.info**: https://javascript.info/
- **W3C**: https://www.w3.org/

### 测试工具
- Chrome DevTools
- Firefox Developer Tools
- Safari Web Inspector
- Edge DevTools
- Node.js REPL (用于纯 JavaScript 验证)

---

## 总结

**技术准确性三原则**:
1. **真实性**: 所有技术内容必须真实可验证
2. **清晰性**: 避免模糊描述和误导性简化
3. **优先性**: 技术准确性优先于故事性

**记住**: 读者信任你的技术内容，任何错误都会损害整个项目的可信度。当有疑问时，查阅规范，测试代码，确保准确。
